 --- BIN FILE READ: BYPASS_REAL_CORR
  10937 INCLUDE 'BYPASS_REAL_CORR';
  10938   PROCEDURE OPTIMIZE_CORR SEXTGX1 SEXTGY1 SEXTGX2 SEXTGY2 EBE;
  10939     VARIABLE MU 800;
  10940     VARIABLE NBAR 800 3;
  10941     VARIABLE OBJ1 1;
  10942     VARIABLE OBJ2 1;
  10943     VARIABLE OBJ 1;
  10944     VARIABLE SGX1 1;
  10945     VARIABLE SGY1 1;
  10946     VARIABLE EB1 1;
  10947     VARIABLE SGX2 1;
  10948     VARIABLE SGY2 1;
  10949     VARIABLE E1 1;
  10950     VARIABLE GAMMA 1;
  10951     VARIABLE CHROM_X 1;
  10952     VARIABLE CHROM_Y 1;
  10953     VARIABLE QUADKX 1;
  10954     VARIABLE QUADKY 1;
  10955     VARIABLE QUADKZ 1;
  10956     VARIABLE MU0 1;
  10957     VARIABLE MU_TP 800 3;
  10958     WRITE 6 'BEGIN';
  10959     SGX1 := SEXTGX1;
  10960     SGY1 := SEXTGY1;
  10961     EB1 := EBE;
  10962     SGX2 := SEXTGX2;
  10963     SGY2 := SEXTGY2;
  10964     WRITE 6 'SGx1, SGy1, EB1 = '&ST(SGX1)&' '&ST(SGY1)&' '&ST(EB1);
  10965     WRITE 6 'SGx2, SGy2 ='&ST(SGX2)&' '&ST(SGY2);
  10966     GAMMA := 1.12792344429;
  10967     FIT SGX1 SGY1;
  10968       LATTICE SGX1 SGY1 SGX2 SGY2 EB1 1; %LATTICE:10580
  10969       TSS MU NBAR 0; %TSS: 4289
  10970       MU0 := CONS(MU);
  10971       DAPEE MU 11 QUADKX;
  10972       DAPEE MU 33 QUADKY;
  10973       OBJ := SQRT(SQR(QUADKX) + SQR(QUADKY));
  10974       WRITE 6 'SGx1, SGy1, EB1 = '&ST(SGX1)&' '&ST(SGY1)&' '&ST(EB1);
  10975       WRITE 6 'SGx2, SGy2 ='&ST(SGX2)&' '&ST(SGY2);
  10976       WRITE 6 'quadKx, quadKy= '&ST(QUADKX)&' '&ST(QUADKY);
  10977       WRITE 6 'MU0 = '&ST(MU0);
  10978       WRITE 6 'OBJ ='&ST(OBJ);
  10979       ENDFIT 1E-5 2000 1 OBJ;
  10980     WRITE 6 '====================================';
  10981     WRITE 6 'SGx1, SGy1, EB1 = '&ST(SGX1)&' '&ST(SGY1)&' '&ST(EB1);
  10982     WRITE 6 'SGx2, SGy2 ='&ST(SGX2)&' '&ST(SGY2);
  10983     WRITE 6 'quadKx, quadKy= '&ST(QUADKX)&' '&ST(QUADKY);
  10984     WRITE 6 'MU0 = '&ST(MU0);
  10985     WRITE 6 'OBJ ='&ST(OBJ);
  10986     SEXTGX1 := SGX1;
  10987     SEXTGY1 := SGY1;
  10988     SEXTGX2 := SGX2;
  10989     SEXTGY2 := SGY2;
  10990     ENDPROCEDURE;
  10991   PROCEDURE MAIN;
  10992     VARIABLE GAMMA 1;
  10993     VARIABLE SGX1 1;
  10994     VARIABLE SGY1 1;
  10995     VARIABLE EB1 1;
  10996     VARIABLE SGX2 1;
  10997     VARIABLE SGY2 1;
  10998     VARIABLE MU 800;
  10999     VARIABLE NBAR 800 3;
  11000     VARIABLE I 1;
  11001     VARIABLE MU 800;
  11002     VARIABLE NBAR 800 3;
  11003     VARIABLE QUADKX 1;
  11004     VARIABLE QUADKY 1;
  11005     VARIABLE QUADKZ 1;
  11006     VARIABLE MU0 1;
  11007     VARIABLE MU_TP 800 3;
  11008     GAMMA := 1.12792344429;
  11009     OV 3 3 0; %OV:  969
  11010     SET_FOR_DEUTERONS GAMMA; %SET_FOR_DEUTERONS:10561
  11011     EB1 := 99.04;
  11012     SGX1 := 0.6025033168317703E-002;
  11013     SGY1 := -.7007946994104486E-002;
  11014     SGX2 := 0.0;
  11015     SGY2 := 0.0;
  11016     LATTICE SGX1 SGY1 SGX2 SGY2 EB1 1; %LATTICE:10580
  11017     OPENF 3618 'dat/Optimization/SPIN_COHERENCE.dat' 'REPLACE';
  11018     WRITE 3618 'SGx2 SGx1 SGy1 quadKx quadKy';
  11019     LOOP I 0 20;
  11020       WRITE 6 'START'&ST(I)&'ITERATION';
  11021       SGX2 := 100000-(10000*I);
  11022       OPTIMIZE_CORR SGX1 SGY1 SGX2 SGY2 EB1; %OPTIMIZE_CORR:10938
  11023       TSS MU NBAR 0; %TSS: 4289
  11024       MU0 := CONS(MU);
  11025       DAPEE MU 11 QUADKX;
  11026       DAPEE MU 33 QUADKY;
  11027       WRITE 3618  ST(SGX2)&' '&ST(SGX1)&' '&ST(SGY1)&' '&ST(QUADKX)&' 
                  '&ST(QUADKY) ;
  11028       ENDLOOP;
  11029     CLOSEF 3618;
  11030     WRITE 6 'USE EB1 = '&ST(EB1);
  11031     WRITE 6 'SGx1 := '&ST(SGX1)&';';
  11032     WRITE 6 'SGy1 := '&ST(SGY1)&';';
  11033     WRITE 6 'SGx2 := '&ST(SGX2)&';';
  11034     WRITE 6 'SGy2 := '&ST(SGY2)&';';
  11035     ENDPROCEDURE;
  11036   PROCEDURE RUN;
  11037     MAIN; %MAIN:10991
  11038     ENDPROCEDURE;
  11039   RUN; %RUN:11036
